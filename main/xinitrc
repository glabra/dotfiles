#!/bin/sh

if test -d /etc/X11/xinit/xinitrc.d
then
   for file in /etc/X11/xinit/xinitrc.d/*
   do
      test -x "${file}" && . "${file}"
   done
   unset file
fi

export LANG='ja_JP.UTF-8'

xset r rate 200 45 &
setxkbmap -option ctrl:swapcaps &
[ -f "${HOME}/.config/Xresources" ] && xrdb -merge "${HOME}/.config/Xresources"

# ime
export XMODIFIERS='@im=fcitx'
export QT_IM_MODULE=fcitx
export GTK_IM_MODULE='fcitx'
fcitx-autostart &

# hack for beautiful looking in Java, avoid Java AWT bugs
export _JAVA_OPTIONS='-Dswing.defaultlaf=com.sun.java.swing.plaf.gtk.GTKLookAndFeel -Dawt.useSystemAAFontSettings=gasp'
export _JAVA_AWT_WM_NONREPARENTING=1
wmname LG3D &

# ui
which cbatticon 2>&1 >/dev/null && cbatticon -l 15 -r 10 &
which cmst 2>&1 >/dev/null && (sleep 1 && cmst -m) &

exec awesome
