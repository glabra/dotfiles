#!/bin/sh
set -ue
umask 0027
export LANG='C'
IFS=' 	
'

IMAGE='flashfox'

print_usage () {
    local status=${1}
    printf 'Usage: %s [-p profile dir] url\n' "$0"
    exit $status
}

profile="${HOME}/.mozilla"

while getopts p:h opt; do
    case "${opt}" in
      p) profile="${OPTARG}" ;;
      h) print_usage 0 ;;
    [?]) print_usage 1 ;;
    esac
done
shift `expr ${OPTIND} - 1`

target_url=${1:-about:blank}

docker-run-gui -d'/tmp' \
    -o"--volume=${profile}:/profile:ro" \
    ${IMAGE} --private-window ${target_url}

