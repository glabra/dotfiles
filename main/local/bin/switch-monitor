#!/bin/sh
set -ue
umask 0027
export PATH='/bin:/usr/bin'
export LANG='C'
IFS=' 	
'


xrandr_action () {
	local INTERNAL_MONITOR='eDP1'
	local EXTERNAL_MONITOR='HDMI2'
	local EXTERNAL_AUDIO='IEC958,1'

	xrandr --output "${EXTERNAL_MONITOR}" --auto --$1 "${INTERNAL_MONITOR}"
	xrandr --listactivemonitors | fgrep -q "${EXTERNAL_MONITOR}" \
		|| amixer sset "${EXTERNAL_AUDIO}" mute
}

case "${1:-}" in
	'right-of'|'same-as')
		xrandr_action $1
		[ -x "${HOME}/.fehbg" ] && "${HOME}/.fehbg"
		;;
	*)
		printf 'Usage: switch-monitor (right-of|same-as)\n'
		;;
esac
